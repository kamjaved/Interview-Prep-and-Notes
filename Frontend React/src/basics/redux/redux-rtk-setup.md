Let’s now convert your classic Redux setup into a modern **Redux Toolkit (RTK)** version step-by-step with clear explanations, while keeping the functionality the same — fetching all products and displaying them.

---

## 🎯 Goals

-  Replace `redux`, `react-redux`, `redux-thunk` boilerplate with **RTK**
-  Use `createSlice`, `createAsyncThunk`, and `configureStore`
-  Keep component logic almost same, but use `useDispatch` and `useSelector` instead of `connect`

---

## 🔹 Step-by-Step Conversion

---

### ✅ 1. Install Redux Toolkit

```bash
npm install @reduxjs/toolkit react-redux
```

---

### ✅ 2. Folder Structure (RTK Friendly)

```
/src
  /features
    /products
      productsSlice.js     ← replaces types, actions, and reducer
  /app
    store.js               ← same idea, now uses configureStore
  /components
    ViewProducts.js
  App.js
```

---

### ✅ 3. Create Async Thunk & Slice – `productsSlice.js`

```js
// /features/products/productsSlice.js

import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';
import axios from 'axios';

// ✅ createAsyncThunk helps handle async logic like redux-thunk, but cleaner
export const getAllProducts = createAsyncThunk(
	'products/getAll', // type prefix
	async (_, thunkAPI) => {
		try {
			const res = await axios.get('/api/products/getAll');
			return res.data.data; // will become action.payload in fulfilled
		} catch (err) {
			return thunkAPI.rejectWithValue(err.message); // for error handling
		}
	}
);

// ✅ createSlice generates action creators and reducer for us
const productsSlice = createSlice({
	name: 'products',
	initialState: {
		allProducts: [],
		loading: true,
		error: null,
	},
	reducers: {
		// we don't need normal reducers now, as we use getAllProducts thunk
	},
	extraReducers: (builder) => {
		builder
			.addCase(getAllProducts.pending, (state) => {
				state.loading = true;
			})
			.addCase(getAllProducts.fulfilled, (state, action) => {
				state.allProducts = action.payload;
				state.loading = false;
			})
			.addCase(getAllProducts.rejected, (state, action) => {
				state.error = action.payload;
				state.loading = false;
			});
	},
});

export default productsSlice.reducer;
```

---

### ✅ 4. Setup Store – `store.js`

```js
// /app/store.js

import { configureStore } from '@reduxjs/toolkit';
import productsReducer from '../features/products/productsSlice';

// ✅ configureStore replaces createStore + applyMiddleware setup
const store = configureStore({
	reducer: {
		products: productsReducer,
	},
});

export default store;
```

---

### ✅ 5. Provide Store in Root – `App.js`

```jsx
// App.js

import React from 'react';
import { Provider } from 'react-redux';
import store from './app/store';
import ViewProducts from './components/ViewProducts';

function App() {
	return (
		<Provider store={store}>
			<ViewProducts />
		</Provider>
	);
}
```

---

### ✅ 6. React Component – `ViewProducts.js`

```jsx
// /components/ViewProducts.js

import React, { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { getAllProducts } from '../features/products/productsSlice';

const ViewProducts = () => {
	const dispatch = useDispatch();

	const { allProducts, loading, error } = useSelector(
		(state) => state.products
	);

	useEffect(() => {
		dispatch(getAllProducts());
	}, [dispatch]);

	if (loading) return <p>Loading...</p>;
	if (error) return <p>Error: {error}</p>;

	return (
		<div>
			{allProducts.map((prod) => (
				<p key={prod.id}>{prod.name}</p>
			))}
		</div>
	);
};

export default ViewProducts;
```

---

## 🔄 Data Flow Recap in Redux Toolkit

| Step | What Happens                                    |
| ---- | ----------------------------------------------- |
| 1    | `dispatch(getAllProducts())` triggers thunk     |
| 2    | Axios call is made inside `createAsyncThunk`    |
| 3    | If success → `fulfilled` runs and updates state |
| 4    | If error → `rejected` runs and sets error       |
| 5    | Component gets state via `useSelector`          |

---

## ✅ Benefits of Redux Toolkit

| Classic Redux                 | Redux Toolkit                      |
| ----------------------------- | ---------------------------------- |
| Manual action types, creators | auto-generated by `createSlice`    |
| Manual async with redux-thunk | built-in `createAsyncThunk`        |
| Boilerplate-heavy             | concise and opinionated            |
| `connect` + `mapStateToProps` | `useDispatch`, `useSelector` hooks |

---
